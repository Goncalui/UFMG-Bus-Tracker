<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeaFlet Tutorial</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
    crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />

    

    <style>
    #map { 
        height: 100vh;
        width: 100%; 
    }
    </style>

</head>


<body>
    <div id="map"></div>
</body>

</html>




<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>


<script type="text/javascript" src="scripts/MovingMarker.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>

<script src="node_modules/leaflet-polylinedecorator/dist/leaflet.polylineDecorator.js"></script>

<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

<script >


var map = L.map('map').setView([-19.8700503, -43.9652489], 15);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
}).addTo(map);

var somePoints = [[-19.876562,-43.975826],[-19.874372,-43.974552],[-19.872522,-43.972252],[-19.870995,-43.969627],[-19.869846,-43.967358],[-19.870510,-43.965214],[-19.872055,-43.965363],[-19.874096,-43.967445],[-19.871796,-43.965260],[-19.869516,-43.963959],[-19.867973, -43.96396],[-19.866161, -43.96245],[-19.865274, -43.96133],[-19.863904, -43.96025],[-19.863033, -43.96211],[-19.863917, -43.96026],[-19.865292, -43.96159],[-19.866200, -43.96278],[-19.866370, -43.96535],[-19.862251, -43.96399],[-19.862593, -43.96723],[-19.862779, -43.97023],[-19.866150, -43.97317],[-19.868611, -43.97221],[-19.873320, -43.97702],[-19.876562,-43.975826]];
 

// dados sobre a rota
let routeControl = L.Routing.control({
    router: L.Routing.osrmv1({
        serviceUrl: 'http://my-osrm/route/v1'
    }),
  
  waypoints: somePoints,
  lineOptions: {
      styles: [{color: 'green'  ,
                opacity: 1 ,
                weight: 2 },
                ]
   },
  show: false,
  fitSelectedRoutes: true, 
  draggableWaypoints: false,
  createMarker: function() { return null; } 
}).addTo(map);



// let target = 0

// var edFis = L.icon({
// iconUrl: 'schoolGreen.png',
// iconSize: [30, 30],
// iconAnchor: [22, 22],
// popupAnchor: [-3, -76]
// });

// var busIcon = L.icon({
// iconUrl: 'busStopOrange.png',
// iconSize: [15, 20],
// iconAnchor: [15, 20],
// popupAnchor: [-3, -76]
// });

// busStop     = L.marker([-19.870147595636784, -43.96852386534484],{icon:  busIcon}).addTo(map)

// fafich      = L.marker([-19.866054679941225, -43.96230156437256],{icon:  busIcon}).addTo(map)

// ECI         = L.marker([-19.865682226242672, -43.96180819035603],{icon:  busIcon}).addTo(map)

// BelasArtes  = L.marker([-19.863940505644692, -43.96020127310054],{icon:  busIcon}).addTo(map)

// Musica      = L.marker([-19.865371396916153, -43.961646637394615],{icon:  busIcon}).addTo(map)

// Biblioteca  = L.marker([-19.866491998997343, -43.96525020510466],{icon:  busIcon}).addTo(map)

// fafich2     = L.marker([-19.866290192255494, -43.96287913243021],{icon:  busIcon}).addTo(map)

// Registro    = L.marker([-19.862240381716866, -43.963980636978306],{icon:  busIcon}).addTo(map)

// adm2        = L.marker([-19.862590679274852, -43.967175827972085],{icon:  busIcon}).addTo(map)

// farroupilha = L.marker([-19.862709909133006, -43.97006456046702],{icon:  busIcon}).addTo(map)

// ceu         = L.marker([-19.866254625376037, -43.97313514408567],{icon:  busIcon}).addTo(map)

// Veterinaria = L.marker([-19.86860097559624, -43.97225683055697],{icon:  busIcon}).addTo(map)

// mc          = L.marker([-19.873255049209053, -43.9770352590252],{icon:  busIcon}).addTo(map)

// eefeto      = L.marker([-19.875955051168837, -43.97521568368508],{icon:  busIcon}).addTo(map)

// odonto      = L.marker([-19.873033321988004, -43.97339755355284],{icon:  busIcon}).addTo(map)

// veterinaria = L.marker([-19.871803419857965, -43.97063527155607],{icon:  busIcon}).addTo(map)

// setorial2   = L.marker([-19.86994596666565, -43.9666424858764],{icon:  busIcon}).addTo(map)

// cad3        = L.marker([-19.87076191235434, -43.9652517757625],{icon:  busIcon}).addTo(map)

// nuclear     = L.marker([-19.873179726738194, -43.966527656582],{icon:  busIcon}).addTo(map)

// nuclearV    = L.marker([-19.873173727244488, -43.96631713625833],{icon:  busIcon}).addTo(map)

// icex        = L.marker([-19.86954399189202, -43.96403330962286],{icon:  busIcon}).addTo(map)

// nuclear     = L.marker([-19.868104073826775, -43.96382916867803],{icon:  busIcon}).addTo(map)

// busStopFinal= L.marker([-19.862981048295495, -43.96206123417503],{icon:  busIcon}).addTo(map)





// var inicio = new Array(-19.876562,-19.874372,-19.872522,-19.870995,-19.869846,-19.870510,-19.872055,-19.874096,-19.871796,-19.869516);
// var fim    = new Array(-43.975826,-43.974552,-43.972252,-43.969627,-43.967358,-43.965214,-43.965363,-43.967445,-43.965260,-43.963959);
// console.log(inicio.length)
// console.log('teste')

// var myIcon = L.icon({
// iconUrl: 'my-icon.png',
// iconSize: [25, 25],
// iconAnchor: [22, 22],
// popupAnchor: [-3, -76]
// });

// const delay = async (ms = 1000) => new Promise(resolve => setTimeout(resolve, ms))
// async function makeALoopWait() {
    
//     for (let dados = 0 ; dados< inicio.length; dados++){
//         if(dados <7){
//         var myMovingMarker = L.Marker.movingMarker(
//         [[inicio[dados], fim[dados]],[inicio[dados+1], fim[dados+1]]],
//         [6000],
//         {icon:  myIcon}
//         ).addTo(map);
        
        
//         myMovingMarker.start();
//         await delay(1000)
//         if(dados == 3){
//             busStop._icon.src = "busStopGreen.png"
//         }
//         await delay(5000)
//         console.log('teste')
//         map.removeLayer(myMovingMarker)

// }
// }
// }   
// makeALoopWait()
</script>

